<html>
<head>

<meta name="viewport" content="initial-scale=1.0, user-scalable=no"/> 
<meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 
<title>Trip {{ trip.id }} </title>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 

<script type="text/javascript"> 

  var directionDisplay;
  var directionsService = new google.maps.DirectionsService();
  var map;
 
  function initialize() {

    directionsDisplay = new google.maps.DirectionsRenderer();



     var myOptions = {
      zoom:7,
      mapTypeId: google.maps.MapTypeId.ROADMAP,

    }
    
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);  
  directionsDisplay.setMap(map);
  calcRoute();
 
}
  
  function calcRoute() {
    var start = "{{trip.trip.startAddress}}";
    var end = "{{trip.trip.endAddress}}";
    var request = {
        origin:start, 
        destination:end,
        travelMode: google.maps.DirectionsTravelMode.DRIVING
    };
    directionsService.route(request, function(response, status) {
      if (status == google.maps.DirectionsStatus.OK) {

       directionsDisplay.setDirections(response);

      showSteps(response);
 
      }



    });
  }



function showSteps(directionResult)
{
  var myRoute = directionResult.routes[0].legs[0];

      alert( myRoute.distance.text)
      alert( myRoute.duration.text)
      alert( myRoute.start_address)
      alert( myRoute.end_address)

}

</script> 
</head>


<body onload="initialize()">



<h1>Host :</h1> 
     {{ trip.host.user.username }} <br>

<h1>Passengers : </h1> 
{% for passenger in trip.passengers.all %}
     
     {{ passenger.passenger.user.username }} <br>

{% endfor %}

<h1> Trip Information : </h1>

<b> Starting at: </b> {{ trip.trip.startAddress }} - {{ trip.trip.startZip }}<br>
<b> Ending at: </b> {{ trip.trip.endAddress }} - {{ trip.trip.endZip }}<br>

<b> Waypoints: </b> 

{% for waypoint in trip.trip.waypoints.all %}

     {{ waypoint.waypoint }} <br>


{% endfor %}<br>

<b> Total Miles: </b> {{ trip.trip.totalMiles }} <br>
<b> Leaving on: </b> {{ trip.trip.leavingDate }} <br>

<div id="map_canvas" style="width:500px; height:300px"></div> 
</body>
</html>
